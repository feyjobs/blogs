---
title: 重构 改善既有代码的设计
date: 2017-07-12 10:34:10
categories: 
- Code
tags:
---

## 重构原则
### 何为重构
> 在软件内部结构的一种调整,目的是在不改变软件可观察行为的前提下,提高其可理解性,降低其修改成本
> 使用一系列重构手法,在不改变软件可观察行为的前提下,调整其结构

- 重构目的:是软件更容易被理解和修改(往往与性能优化相反,性能优化往往会使代码更难理解)
- 重构不改变软件可观察行为

#### 两顶帽子
两顶帽子:**添加新功能** **重构**
无论何时都要清楚自己带的是那一顶帽子,一定不要都带上!!

### 为何重构
1. 重构改进软件设计
	- 代码维持自己该有的形态
	- 消除重复代码
2. 使软件更容易理解
	- 使他人更容易理解一份代码
	- 使自己理解当前代码
3. 找bug
	- 重构可以帮忙找出现存逻辑的bug
4. 提高编程速度
	- 良好的设计是维持软件开发速度的根本
	- 重构能阻止系统腐败, 提高系统的设计质量

### 何时重构
#### 三次法则
	事不过三,三则重构
#### 添加功能时
	- 加强原代码理解
	- 修改源代码使之增强可拓展性,从而使添加新功能更加轻松

#### 修补错误时
#### Code Review的时候
	
### 怎么跟经理说
- 讲道理的,告诉他,然后排期
- 不讲道理的,不告诉他,暗暗排期

### 重构的难题
#### 数据库
#### 修改接口
 - 让旧接口调用新接口。同时维护两个接口
 - 不要发布接口
 
#### 难以通过重构手法完成的设计改动
 1. 设计之前考虑重构方案
 2. 存在=> 选择最简单的设计方案
 3. 找不到=> 好好设计别出坑

#### 何时不该重构
 - 现存代码无法运作
 - deadline不重构
 
### 重构与设计



